# PROG ZBW_HDBSQL_CSV - Генерация скриптов для выгрузки данных BW в csv через hdbsql

## Описание бизнес-процесса системы
### Цель документа
Спецификация является основой для разработок, которые будут сделаны в SAP и не SAP системах. Заказчик должен проверить и утвердить её официально.
Реализация спецификации начнется только после утверждения со стороны заказчика.
### Описание бизнес-процесса
Разработка необходима для автоматизации процесса подготовки скриптов, которые вызывают hdbsql для генерации csv-файлов с данными. Файлы
предназначены для передачи в Hadoop.
### Предыстория
Текущий подход в выгрузки данных из BWP-HANA в Hadoop предполагает обращение со стороны Hadoop к HANA EE, которая через SDA обращается к HANA
BWP и передает в Hadoop результаты выполнения SELECT-операторов. Для повышения производительности передачи иногда выполняют распараллеливание
SELECT-запросов: каждый запрос возвращает свой определенный диапазон данных. Неоднократно замечена высокая нагрузка на сервер HANA-BWP при
одновременном выполнении большого числа обращений со стороны HANA EE (и, в свою очередь, из Hadoop). Иногда Hadoop вызывал загрузку данных из
BWP, когда данные еще не были полностью рассчитаны. Это приводило к необходимости повторных выгрузок.
Для устранения недостатков текущего подхода был разработан и реализован новый подход: выгрузка csv-файлов данных из HANA BWP посредством утилиты
hdbsql (стандартная утилита SAP HANA).
#### Достоинства нового подхода:
* более высокая производительность,
* упрощение ландшафта (HANA EE не требуется для этой задачи)
* бОльшая гибкость настройки правил формирования данных для выгрузки (SELECT-операторы)
* поддержка полной и дельта-выгрузки в csv
* управление регламентом выгрузки как со стороны источника данных (SAP BW), так и со стороны потребителя (Hadoop data engineers)
* ведения каталога выгрузок с указанием дельта-меток
* лицензионное соответствие SAP
#### Недостатки
* необходим контроль занимаемого csv-файлами дискового пространства на files share
* большее кол-во шагов для настройки регулярной выгрузки
